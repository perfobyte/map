(()=>{var X=Math.PI,ie=X/180,I=ie/2,j=X/4,P=180/X,b=[],te="/f/application/json/country.json",oe="black",ae="white",ne={passive:!1};var r=(e=>{var o=-e;return{lineWidth:1,lastX:0,lastY:0,dirty:!0,WORLD_W:360,WORLD_H:180,width:0,height:0,w2:0,h2:0,mw2:0,mh2:0,w_w2:0,h_h2:0,x:0,y:0,scale:1,maxLat:e,mMaxLat:o,maxLatMore:-(Math.log(Math.tan(j+e*I))*P),maxLatLess:-(Math.log(Math.tan(j+o*I))*P)}})(85.05112878);var y={features:b,rect:[0,0,0,0]};var u=document.getElementById("main"),fe=u.getContext("2d");var D=e=>{var o=e.currentTarget,n=o.innerWidth,t=o.innerHeight,l=0,i=0;return r.w_w2=n-(l=(r.width=u.width=n)/2),r.h_h2=t-(i=(r.height=u.height=t)/2),r.mw2=-(r.w2=l),r.mh2=-(r.h2=i),r.dirty=!0};var S=()=>(r.x=r.y=0,r.dirty=!0,r.scale=Math.min(u.clientWidth/r.WORLD_W,u.clientHeight/r.WORLD_H));var Y=e=>{var o=0,n=0,t=0,l=r.WORLD_W;return r.x=r.x-((o=e.clientX)-r.lastX)/(t=r.scale),r.y=r.y-((n=e.clientY)-r.lastY)/t,r.lastX=o,r.lastY=n,r.dirty=!0};var B=e=>(r.lastX=e.clientX,r.lastY=e.clientY,e.view.addEventListener("mousemove",Y));var z=e=>e.view.removeEventListener("mousemove",Y);var H=e=>{var o=e.currentTarget,n=o.getBoundingClientRect(),t=e.clientX-n.left,l=e.clientY-n.top,i=0,a=t-r.w2,f=l-r.h2,s=r.x,m=r.y,p=a/(i=r.scale)+s,_=f/i+m,d=a/(r.scale=i*=e.deltaY>0?1/1.15:1.15)+s,M=f/i+m;return e.preventDefault(),r.x+=p-d,r.y+=_-M,r.dirty=!0};var G=(e,o,n,t,l,i,a,f,s,m)=>(e[0]=o,e[1]=n>t?s:n<l?m:-(Math.log(Math.tan(a+n*i))*f),e);var T=(e,o)=>{let n=1/0,t=1/0,l=-1/0,i=-1/0,a=null,f=0,s=o.length,m=0,p=0;for(;f<s;f++)(m=(a=o[f])[0])<n&&(n=m),m>l&&(l=m),(p=a[1])<t&&(t=p),p>i&&(i=p);return e[0]=n,e[1]=t,e[2]=l,e[3]=i,e};var K=(e,o)=>!(e[2]<o[0]||e[0]>o[2]||e[3]<o[1]||e[1]>o[3]);var q=(e,o,n,t,l,i)=>{for(var a=0,f=e.features,s=null,m=f.length,p=null,_=0,d=null,M=null,g=Array.from(f,l),x=null;a<m;a++)p=(s=f[a]).geometry,_=(x=g[a]).k,_===0?(x.projected=d=Array.from(p.coordinates,o),x.bboxes=[i([0,0,0,0],d[0])]):_===1&&(x.projected=d=Array.from(p.coordinates,n),x.bboxes=Array.from(d,t));return g};var C=(e,o,n,t,l,i,a,f,s,m,p,_,d,M,g)=>{var x=0,L=0,$=0,O=0,ee=0,c=0,k=0,h=0,R=0,w=null,v=null,A=null,re=null,E=null;for(t.fillStyle=_,t.fillRect(0,0,l,i),t.strokeStyle=d,t.lineWidth=M,t.beginPath(),ee=e.length;O<ee;O++)if((x=(E=e[O]).k)===0){if(!g(E.bboxes[0],o))continue;for(c=0,k=(A=E.projected).length;c<k;c++){for(h=1,R=(w=A[c]).length,t.moveTo(((v=w[0])[0]-f)*a+m,(v[1]-s)*a+p);h<R;h++)t.lineTo(((v=w[h])[0]-f)*a+m,(v[1]-s)*a+p);t.closePath()}}else if(x===1){for(L=0,$=(A=E.projected).length;L<$;L++)if(g(E.bboxes[L],o))for(c=0,k=(re=A[L]).length;c<k;c++){for(h=1,R=(w=re[c]).length,t.moveTo(((v=w[0])[0]-f)*a+m,(v[1]-s)*a+p);h<R;h++)t.lineTo(((v=w[h])[0]-f)*a+m,(v[1]-s)*a+p);t.closePath()}}return t.stroke()};var F=(e,o,n,t,l,i,a,f)=>(e[0]=l/t+o,e[1]=i/t+n,e[2]=a/t+o,e[3]=f/t+n,e);var J=((e,o,n,t,l,i,a)=>{var f=s=>{var m=0,p=0,_=0;return r.dirty&&(o(y.features,n(y.rect,m=e.x,p=e.y,_=e.scale,e.mw2,e.mh2,e.w_w2,e.h_h2),t,l,e.width,e.height,_,m,p,e.w2,e.h2,i,a,e.lineWidth,K),r.dirty=!1),requestAnimationFrame(f)};return f})(r,C,F,u,fe,ae,oe);var N=e=>e.json();var Q=e=>G(e,e[0],e[1],r.maxLat,r.mMaxLat,I,j,P,r.maxLatMore,r.maxLatLess);var W=e=>Array.from(e,Q);var U=e=>Array.from(e,W);var V=e=>T([0,0,0,0],e[0]);var Z=e=>{var o=e.geometry.type;return{k:o==="Polygon"?0:o==="MultiPolygon"?1:2,projected:b,bboxes:b}};fetch(te).then(N).then(e=>(y.features=q(e,W,U,V,Z,T),u.addEventListener("mousedown",B),u.addEventListener("wheel",H,ne),window.addEventListener("resize",D),window.addEventListener("mouseup",z),document.getElementById("reset").onclick=S,window.dispatchEvent(new Event("resize")),S(),requestAnimationFrame(J)));})();
//# sourceMappingURL=1.js.map
